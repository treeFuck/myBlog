# QG 工作室 2020 招新网 (2019.08 – 2019.09)

**「描述」**QG工作室用以向2020新生介绍和宣传工作室的网站，运用到一些技巧对网页性能进行了多维度优化。

**「职责」**整体页面搭建、核心动画实现。

**「项目亮点」**

1. 通过对静态资源进行压缩，并挂载到 oss 上来提高加载速度，消除首页白屏现象
3. 使用 requestAnimationFrame 改写定时器动画，按照动画帧来渲染动画，提高动画流畅度
4. 使用 web worker 分离 js 引擎线程的计算任务，避免阻塞 GUI 渲染线程而造成页面卡顿
5. 通过 css3 属性来开启 GPU 硬件加速，大大提升手机端动画的渲染性能。 

**「技术要点」**svg、Vue

## 挂载到 oss 上来提高加载速度？oss 是用来提高加载速度的吗？
这里可能描述的不太清除，其实是使用了 oss + cdn 的结合来提速的。**我们可以将 OSS 的存储空间（Bucket）作为源站，利用阿里云 CDN 将源内容发布到边缘节点。当大量终端用户重复访问同一文件时，可以直接从边缘节点获取已缓存的数据，提高访问的响应速度。**

## GPU 硬件加速

> 参考博客：[CSS动画之硬件加速](https://www.w3cplus.com/css3/introduction-to-hardware-acceleration-css-animations.html) —— 南北

举个例子，平时如果我们要做一个位移动画，可能有两种实现方式：
1. 对一个元素进行绝对定位，然后用 left 和 top 去改变它的位置
2. 使用 css 的 transform 进行位移

我们会发现前者动画会比较卡顿，后者动画会比较流畅，为什么呢？

通过控制台进行性能分析会发现，使用 top 和 left 进行位移动画，每一帧都要发生一次重绘，如果重绘工作量很大耗时过长的话，这个动画渲染就会卡顿。

但是我们对 transform 位移动画进行性能分析就会发现，它只在动画开始前和动画结束后发生一次重绘。

那它是怎么产生动画的呢？transform 会创建一个独立的复合图层，而图层在 GPU 里进行 transform 位移是不会触发重绘的，所以渲染性能会更好。

只有少数的 css 属性能触发 GPU 的硬件加速，比如 transform、opacity、filter。

## 一个招新网为什么会使用 web worker 去跑一些大数据的运算
因为我这个招新网有一个特殊的需求，就是用 echart 图表去展示当前报名的一个情况，比如每个方向报名的人数有多少，每个班级报名的人数的有多少，所有人笔试成绩里各个分数段的人有多少……因为这些图表都需要展示最新的，并且一些其他的原因，后台那边没有帮我计算好最后要展示的图表数据，只返回给我原始的报名数据，大概有五六百条报名数据，我需要自己用这份原始数据去计算出最后的图表数据。为了避免卡顿，我就给每一个图表都开了一个 web worker 子线程去计算图表数据，这样图表进行切换的时候就很快能够拿到数据。

五六百个人报名你的工作室？
其实有效数据可能只有三四百条，因为里面有相当一部分数据是恶意注册的，就是有人在压测我们招新系统的后台。

## 说一下你对 svg 的理解

## 说一下响应式布局

## 你说你对网页性能进行了优化，能不能具体说一下你优化了多少

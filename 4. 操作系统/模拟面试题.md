# 模拟面试题

### 进程和线程的区别
1. 进程是资源分配的基本单位，而线程是调度的基本单位。
2. 一个进程可以拥有多个线程，线程可以访问其隶属进程的资源。

### 进程的状态
进程有三个状态：
1. 就绪：就绪 →  运行
2. 运行：运行 → 阻塞 / 运行 → 阻塞
3. 阻塞：阻塞 → 就绪

![](./img/进程状态.png)

### 常见的进程调度算法
1. 先来先去服务，按照进程的请求顺序去执行，利于长作业，不利于短作业
2. 短作业优先，先执行估计时间短的作业，利于短作业，不利于长作业
3. 时间片轮转，将所有就绪进程按先来先去的原则拍成一个队列，然后每次调度的时候，让队首进程执行一个时间片，执行完后把队首放到队尾。

### 进程之间怎么通信 (IPC)

1. 匿名管道：建立一条半双工管道，数据只能单向流动，只适用有亲缘关系的进程之间的通信
2. 有名管道：允许无亲缘关系的进程进行通信
3. 共享内存：一个进程去创建一个其他多个进程也能访问的共享内存。这个是最快的 IPC 方式。
4. 套接字：套接字比较特殊，是用以不同主机直接的进程通信

### 线程之间怎么通信
读写同一进程中的的数据进行通信


### 什么是死锁

死锁，是多个进程在运行期间因为竞争资源而产生的一种僵局。

比如进程 A 想要一个资源，但这个资源正在被 B 所占用，而 B 也想要一个资源，但这个资源正在被 A 所占用，所以导致 A 和 B 都在等待对方用完占用资源主动释放。 

### 产生死锁的四个必要条件
1. 互斥：资源具有排它性，即一个资源只能被一个进程占用，直到被进程释放
2. 占有和等待：一个进程因请求的资源被占用而等待时，对自己已拥有的资源保持不放
3. 不可抢占：进程不能抢占其他已被占用的资源
4. 环路等待：陷入死锁的进程会形成一条环路，该环路的进程都在等待其他进程所占用的资源

### 怎么解决死锁
#### 1. 鸵鸟策略
故名思意，就是不管它，因为死锁发生概率很低，一般不会对用户产生影响。

#### 2. 死锁检测和死锁恢复
死锁检测：在死锁里的进程和资源会形成一个环，我们可用从这个环的某一个节点开始去深度遍历，并打上标记，如果遍历到已经标记过的节点，就说明成环，也就是存在死锁

死锁恢复：
1. 让某一个进程去强制抢占它请求资源
2. 杀死环路里的某一个进程

#### 3. 死锁预防
在程序运行之前，预防死锁的发生。具体的话，就是破坏死锁的四个必备条件之一。

比如破坏占有和等待条件，可以规定所有进程在开始执行前请求所需要的全部资源。

#### 4. 死锁避免
在程序运行的时候，避免死锁发生（比如银行家算法）

### 虚拟内存的原理

虚拟内存，就是将实际上的物理内存，拓展成更大的逻辑内存空间，从而让程序可以使用更多的内存。

每一个程序拥有自己的逻辑内存地址，并对这些地址进行分页，当程序使用了一个不在物理内存中的页时，通过页面置换算法把该页置换到物理内存中。

### 常见的虚拟内存页面置换算法
1. 先进先出
2. 最久未使用
3. 最近未使用
4. 最近最久未使用

### 读取磁盘的过程
1. 寻找合适扇区 → 旋转时间
2. 寻找合适的磁道 → 寻道时间
3. 数据传输时间

### 磁盘调度算法
寻道时间最长，磁盘调度算法调度的是寻道时间：
1. 先来先去 → 按照磁盘请求顺序进行调度
2. 最短寻道 → 优先调度距离磁头最近的磁道 → 两端容易饥饿
3. 电梯算法 → 先按一个方向寻找最近的磁道进行调度，直到该方向没有磁盘请求，然后改变方向

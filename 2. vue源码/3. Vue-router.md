# Vue Router
## 1. Vue Router 的作用
Vue 的构建一般是轻量级的单页面应用。传统的多页面应用是通过超链接来实现页面切换和跳转了，而对于单页面应用 (SPA) 而言，它的核心之一是：**更新视图而不重新请求页面**。

所以，VueRouter 的作用就是：将 URL 与视图组件建立**映射关系**，通过切换不同的 url 来渲染不同组件，实现视图更新。

## 2. 路由安装过程
1. **Vue.use(VueRouter) 安装路由**。执行 VueRouter.install(Vue) 混入一个 beforeCreate 和一个 destroyed 生命周期钩子。
2. **new VueRouter() 生成路由实例**。初始化一些属性和方法。
3. new Vue() 创建 Vue 实例时：
	- 执行之前混入的 beforeCreate 钩子，**将 `vm._route` 转化为响应式数据**
	- 创建渲染函数观察者，**让  `vm._route` 收集渲染函数观察者作为依赖**
## 3. 路由切换的原理
- 获取 url 的变化：history 模式监听 window.onpopstate 事件，hash 模式监听 window.onhashchange 事件。**通过监听事件和内部切换路由的 API，获取到 url 的变化**。
- 修改视图：VueRouter 内部维护了一个 route 路由对象，它是一个响应式数据，并且收集了渲染函数观察者作为依赖。每次切换 url 时，都会改变 route 的属性，进而**触发渲染函数观察者**重新执行渲染函数，进而渲染出不同的 `<router-view>`。
## 4. hash 模式和 history 模式的区别 
- hash 模式：通过修改 url 后的 hash 来切换页面，并且 **hash 的改变不会向服务端发起请求**。缺点是，有个 ‘#’ 符合比较丑。
- history 模式：利用了 HTML5 History 接口**对浏览器历史记录进行修改，修改后会改变 URL，但一样不会向后端发起请求**。缺点，在二级导航刷新页面向服务器请求时，因为 URL 匹配不到任何静态资源而页面白屏，所以需要服务端配置一下：**如果 URL 匹配不到任何静态资源，则应该返回同一个 index.html 页面**。
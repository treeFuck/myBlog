# shell 变量知识进阶与实践

## 一、shell 中特殊且重要的变量

### 1.1 特殊位置参数变量

从命令行、函数、脚本执行处等传递参数时，你想接住这些参数，就需要使用特殊位置参数变量。

介绍一下常用的特殊位置参数变量：

1. ${0} → 当前执行的 shell 脚本的文件名
2. ${n} → 当前执行 shell 脚本的第 n 个参数值
3. ${#} → 当前执行 shell 脚本的参数总数
4. ${*} → 获取当前执行 shell 脚本的全部参数
5. ${@} → 获取当前执行 shell 脚本的全部参数

${\*} 和 ${@} 的区别在于，如果给二者加上双引号：
+ “${\*}”  →  “${1} ${2} ... ${n}”
+ “${@}” → “${1}”  “${2}” ... “${n}”

### 1.2 shell 进程中的特殊状态变量

1. ${?} → 获取执行上一个指令的执行状态返回值（0 → 成功，非 0 → 失败）
2. ${$} → 获取当前执行的 shell 脚本的进程号 PID
3. ${!} → 获取上一个在后台工作的进程的进程号 PID
4. ${_} → 获取在此之前执行的命令或脚本的最后一个参数

```bash
$ pwd
# /c/Users/bolewang

$ echo ${?}
# 0
```

## 二、bash shell 内置变量命令

bash shell 内置了一下命令，由 shell 本身提供，常用的内部命令有：echo、eval、exec、export、read、shift。

### 2.1 echo

echo 命令，用于在屏幕上输出信息。

echo 后面可以携带参数来指定输出方式：

+ -n → 不换行输出内容
+ -e → 解析转义字符，比如下面这些：
  + \n → 换行
  + \r → 回车
  + \t → 制表符（Tab）
  + \b → 退格
  + \v → 纵向制表符

### 2.2 eval 

当 shell 程序执行到 eval 语句时，shell 读入参数 args，并将它们组合成一个新的命令，然后执行。

### 2.3 exec

exec 能够在不创建新的子进程的前提下，转去执行特指的命令，当特指的命令执行完毕后，该进程就终止了。

### 2.4 read

从标准输入读取字符串等信息，传给 Shell 程序内部定义的变量。

### 2.5 shift

shift 语句会按如下方式重新命名所有位置参数变量，即 $2 成为 $1，$3 成为 $2 等。

### 2.6 exit

退出 shell 程序。

## 三、shell 变量子串知识及实践

略

## 四、shell 特殊拓展变量的知识与实践

略
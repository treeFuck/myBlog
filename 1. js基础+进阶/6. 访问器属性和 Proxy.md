# 访问器属性 与 Proxy
> 前言：为什么要把这两个放到一起讲呢，主要是因为这两者的功能有一定的类似性，都可以拦截和代理关于对象的一些操作。又比如 Vue2.0 里的数据响应系统的是基于访问器属性，而在 Vue3.0 里用 proxy 改写了这部分的功能。

### 一、访问器属性
访问器属性通过 Object.defineProperty(obj, attr, handler) 来指定 obj.attr 的描述对象 handler，这个描述对象包括:
	1. configurable：是否可配置，默认为 true
	2. enmerable：是否可以被 for...in 遍历，默认为 true
	3. get：getter 代理，读取属性
	4. set：setter 代替，写入属性

```js
let obj = {
	_a : 2
};
let handler = {
	get() {
		return this._a+1;
	},
	set(vl) {
		return this._a = vl;
	}
};

Object.defineProperty(obj, 'a', handler)

console.log(obj._a, obj.a); // 2 3
obj.a = 99;
console.log(obj._a, obj.a); // 99 100 
```
### 二、Proxy
proxy 的本质可以理解为在一个对象前设置了一个 “拦截层” ，外界访问这个对象都必须通过这层拦截。

基本语法大概是这样：`let proxy = new Proxy(target, handler)`

> 注意：要使 Proxy 起作用，必须针对 Proxy 实例进行操作，而不是针对目标对象进行操作。

下面列举一下 Proxy 常用的拦截：
	1. get：拦截对象属性的读取
	2. set：拦截对象属性的写入
	3. has：拦截 in 操作（不能拦截 for...in）
	4. deleteProperty：拦截 delete 操作
	5. ownKeys：拦截遍历键名
	6. defineProperty：拦截 defineProperty 操作
	7. apply：拦截将 Proxy 视为函数调用的操作
	8. construct：拦截将 Proxy 视为构造函数调用的操作

### 三、总结
- 访问器属性的拦截是针对属性的，proxy 的的拦截是针对对象的并且不会修改原对象。
- 如果对象进行深度拦截，访问器属性需要不断递归，proxy不需要。
- proxy 能拦截到数组、Map、Set、WeakSet 。
- Proxy 代理会导致目标对象内部的 this 关键字指向 Proxy 代理。


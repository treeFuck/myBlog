# AJAX

## 一、XMLHttpRequest 对象
### 1.1 创建
```
let req = new XMLHttpRequest();
```
### 1.1 属性
- **readyState** ：状态码，表示 XMLHttpRequest 对象当前状态
	+ 0 → UNSENT → 还未调用 open 方法
	+ 1 → OPENED → 已经调用 open 方法，可以调用  setRequestHeader 方法设置头部
	+ 2 → HEADERS_RECEIVED → 已经调用 send() 方法
	+ 3 → LOADING → 请求中
	+ **4 → DONE → 请求完毕**
- **status**：响应中的数字状态码，标准的 HTTP status codes
	+ 1xx → 还在请求
	+ **2xx → 请求成功**
	+ 3xx → 重定向
	+ 4xx → 客户端错误
	+ 5xx → 服务端错误
- **withCredentials：布尔值，用来指定跨域 Access-Control 请求是否应当带有授权信息，如 cookie 或授权 header 头。**
- **response：响应实体**
- responseText：响应的字符串形式
- responseXML：响应的 HTML / XML形式
- onreadystatechange：readyState 改变时触发的回调
### 1.2 方法
- **open(methods, url)：初始化请求**
- setRequestHeader(header, value)：设置请求首部字段 header 的值
- **send(body)：发送请求**
- abort()：如果请求已经被发出，中止请求
- getResponseHeader(header)：获取响应首部字段 header 的值

### 1.3 事件
- onabort：指定 abort 事件回调，请求被 abort 中止时触发
- onerror：指定 error 事件回调，请求遭遇错误时触发
- onload：指定 load 事件回调，请求成功完成时触发
- onloadend：指定 loadend 事件回调，请求结束时触发，无论是请求 error 还是 load

### 1.4 请求流程
```js
let req = new XMLHttpRequest();
req.open('GET', 'https://jsonplaceholder.typicode.com/todos/1');
req.onreadystatechange = ()=>{
	if (req.readyState == 4 && req.status == 200) {
		console.log(req.response)
	}
}
req.send();
```

## 